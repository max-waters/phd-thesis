\newcommand{\clplan}[1]{
    \begin{tikzpicture}[
        op/.style={draw,minimum height=0.4cm,font=\scriptsize,inner sep=2pt,text=black},
        cond/.style={text=black,font=\bfseries,font=\scriptsize},
        dummy/.style={}
        ]
        
        \node[op] (op1) []	{$\initoptr$};
        \node[cond] (post11) [above right = 0.33cm and -0.1cm of op1.east, anchor = west] {$p(1)$};
        \node[cond] (post12) [right = -0.1cm of op1.east, anchor = west] {$p(2)$};
        \node[cond] (post13) [below right = 0.33cm and -0.1cm of op1.east, anchor = west] {$r(2)$};
    
        \node[op] (op3) [above right = 0.4cm and 3cm of op1, anchor = center]	{$A(x_1)$}; 
        \node[cond] (pre3) [left = -0.1cm of op3.west, anchor = east] {$p(x_1)$};
        \node[cond] (post31) [above right = 0.13 and -0.1cm of op3.east, anchor = west] {$g_1$};
        \node[cond] (post32) [below right = 0.13 and -0.1cm of op3.east, anchor = west] {$\neg r(x_2)$};
        
        \node[op] (op4) [below right = 0.4cm and 3cm of op1, anchor = center]	{$B(x_2)$}; 
        \node[cond] (pre4) [left = -0.1cm of op4.west, anchor = east] {$r(x_2)$};
        \node[cond] (post4) [right = -0.1cm of op4.east, anchor = west] {$g_2$};
        
        \node[op] (op5) [right = 6.5cm of op1, anchor = center]	{$\goaloptr$};
        \node[cond] (pre51) [above left = 0.13cm and -0.1cm of op5.west, anchor = east] {$g_1$}; 
        \node[cond] (pre52) [below left = 0.13cm and -0.1cm of op5.west, anchor = east] {$g_2$}; 
           
        \draw[->] (post11.east) to[out=0, in=180] (pre3.west);
        \draw[->] (post12.east) to[out=0, in=180] (pre3.west);
        \draw[->] (post13.east) to[out=0, in=180] (pre4.west);
        
        \draw[->] (post31.east) to[out=0, in=180] (pre51.west);
        \draw[->] (post4.east) to[out=0, in=180] (pre52.west);
        
    \end{tikzpicture}%
}

\begin{figure}

\begin{subfigure}{\textwidth}
    \centering
    \clplan{}
    %
    \caption{\CLP $P_1$ from a synthetic domain. Arrows indicate allowable causal links.}
    \label{fig:cl-plan-example} 
\end{subfigure}

\vspace{1cm}

\begin{subfigure}{\textwidth}
\centering
\small
\begin{tabular}{l l l l}
$\opset = \{ \initoptr$, $A(x_1)$,  & $\cform = ((x_1 = 1 \land \initoptr \prec A) \lor (x_1 = 2 \land \initoptr \prec A)) \land$ \\
$\qquad \;\; B(x_2)$, $\goaloptr \}$     & $\qquad x_2 = 2 \land \initoptr \prec B \land (x_1 \neq x_2 \lor A \prec \initoptr \lor B \prec A) \land  $\\
                                    & $\qquad A \prec \goaloptr \land B \prec \goaloptr$ \\
\end{tabular}
\caption{Partial plan $P_2 = \tup{\opset, \cform}$, an equivalent representation of $P_1$}
\label{fig:cl-plan-pp-example} 
\end{subfigure}
\caption[Causal link plan example]{Causal link plan (\CLP) example}
\end{figure}